<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Your IP Address</title>
</head>
<body>
<h2>Your IP Address</h2>
<p id="ipDisplay">Loading your IP...</p>

<script>
  // Replace this with your webhook URL:
  const WEBHOOK_URL = "https://example.com/webhook"; // <-- change this

  async function getIp() {
    try {
      // 1. Get public IP from ipify
      const response = await fetch('https://api.ipify.org?format=json');
      const data = await response.json();
      const ip = data.ip;

      // 2. Display it on the page
      document.getElementById('ipDisplay').textContent = 'Your IP is: ' + ip;

      // 3. Send the IP to your webhook
      await fetch(WEBHOOK_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ ip: ip, time: new Date().toISOString() })
      });

      console.log('IP sent to webhook:', ip);
    } catch (error) {
      document.getElementById('ipDisplay').textContent = 'Unable to fetch IP address.';
      console.error('Error fetching or sending IP:', error);
    }
  }

  getIp();
</script>
</body>
</html>
